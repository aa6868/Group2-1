<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <title>state</title>
	   <link type="text/css" href="../css/login.css" rel="stylesheet">
   </head>
   <body>
      <form>
         <div class="container">
         <h1>寫作登入</h1>
         <button type="button" id="button" class="cbtn">上一步</button>
         </div>

         <label for="email">帳號</label>
         <input type="text" id="email" name="email" placeholder="請輸入帳號">
         
         <label for="password">密碼</label>
         <input type="password" id="password" name="password" placeholder="請輸入密碼">
         
         <br><br>
         <input type="button" id="login" name="login" value="登入">
      </form>

      <script type="module">

         import { signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.21.0/firebase-auth.js'
         import { db, auth } from '../js/DB.js';

         // Get elements
         document.getElementById("login").addEventListener('click',function(){
         const loginEmail = document.getElementById('email').value;
         const loginPassword = document.getElementById('password').value;

         signInWithEmailAndPassword(auth, loginEmail, loginPassword)
            .then((userCredential) => {
               
               // Signed in successfully
               const user = userCredential.user;
               console.log(user);
               console.log('Signed in as:', user.email);
               // Redirect to homepage or perform other actions
               // Redirect to the next page
               window.location.href = 'round.html';
            })
            .catch((error) => {
               // Handle sign-in error
               const errorCode = error.code;
               const errorMessage = error.message;
               console.error('Sign-in error:', error.code, error.message);
               alert('帳號或密碼錯誤');
               
            });
         });
         document.getElementById("button").addEventListener('click', function() {
            window.location.href = 'state.html';
         });
      

      </script>


   </body>

</html>